<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		
		<!-- THEME UTILITY -->
		<link rel="stylesheet" href="../../../_themes/utils/loader.css" type="text/css">
		<!-- END THEME UTILITY -->
		
		<!-- THEME UTILITY -->
		<script type="text/javascript" src="../../../_themes/utils/loader.js"></script>
		<!-- END THEME UTILITY -->
		
		<!-- CORE -->
		<!-- Can be replaced by wink.min.js -->
		<script type="text/javascript" src="../../../_amd/js/amd.js"></script>
		<script type="text/javascript" src="../../../_base/_base/js/base.js"></script>
		<script type="text/javascript" src="../../../_base/_dom/js/dom.js"></script>
		<script type="text/javascript" src="../../../_base/error/js/error.js"></script>
		<script type="text/javascript" src="../../../_base/json/js/json.js"></script>
		<script type="text/javascript" src="../../../_base/ua/js/ua.js"></script>
		<script type="text/javascript" src="../../../_base/topics/js/topics.js"></script>
		<script type="text/javascript" src="../../../_base/_feat/js/feat.js"></script>
		<script type="text/javascript" src="../../../_base/_feat/js/feat_json.js"></script>
		<script type="text/javascript" src="../../../_base/_feat/js/feat_css.js"></script>
		<script type="text/javascript" src="../../../_base/_feat/js/feat_event.js"></script>
		<script type="text/javascript" src="../../../_base/_feat/js/feat_dom.js"></script>
		<script type="text/javascript" src="../../../fx/_xy/js/2dfx.js"></script>
		<script type="text/javascript" src="../../../math/_basics/js/basics.js"></script>
		<script type="text/javascript" src="../../../net/xhr/js/xhr.js"></script>
		<script type="text/javascript" src="../../../ui/xy/layer/js/layer.js"></script>
		<script type="text/javascript" src="../../../ux/event/js/event.js"></script>
		<script type="text/javascript" src="../../../ux/touch/js/touch.js"></script>
		<!-- END CORE -->
		
		<script type="text/javascript" src="../../../ui/xy/progressbar/js/progressbar.js"></script>
		
		<script type="text/javascript" src="../../jsloader/js/jsloader.js"></script>
		<script type="text/javascript" src="../../cssloader/js/cssloader.js"></script>
		<script type="text/javascript" src="../../imagesloader/js/imagesloader.js"></script>
		
		<script type="text/javascript" src="../js/smartloader.js"></script>
		
		<script>		
			smartLoaderDomNode = null;

			scripts = new Array('../../jsloader/test/files/test1.js', '../../jsloader/test/files/test2.js', './false.js');
			styles = new Array('../../cssloader/test/files/test1.css', '../../cssloader/test/files/test2.css', './false.css');
			images = new Array('./img/test1.jpg', './img/test2.jpg', './img/test3.jpg', './img/test4.jpg', './img/test5.jpg', './img/test6.jpg', './img/test7.jpg', './img/test8.jpg', './img/test9.jpg');

			progressBarProperties =
			{
				'height': 15,
				'width' : 250
			}
			
			init = function()
			{
				wink.subscribe('/smartloader/events/loadend', {method: 'finish'});

				smartLoader = new wink.net.SmartLoader(progressBarProperties);

				// Add the progress bar to the screen
				$('progress').appendChild(smartLoader.getDomNode());
				
				smartLoader.load({'scripts': scripts, 'styles': styles, 'images': images});
			}

			finish = function()
			{
				alert('ressources loaded');

				// Remove the progress bar from the screen
				//$('progress').removeChild(smartLoader.getDomNode());

				// display the preloaded contents
				$('test').style.display = 'block';
			}
		</script>
	</head>
	<body onload="init()">
		<div class="w_box w_header w_bg_dark">
			<span>smart loader</span>
			<input type="button" value="home" class="w_button w_radius w_bg_light w_right" onclick="window.location='../../..?theme='+theme"/>
		</div>
		
		<div class="w_bloc" id="progress">
			Progress
		</div>
		
		<div class="w_bloc">
			Once the style, scripts and images will have been loaded, the content and aspect of the title and content below should change. 9 images should appear in the page.
		</div>
		
		<div id="title" class="w_bloc title">
			This is the title
		</div>
		
		<div id="content" class="w_bloc content">
			This is the content
		</div>
		
		<div class="w_bloc" id='test' style='display:none'>
			<img src='./img/test1.jpg' width='30px' height='30px' />
			<img src='./img/test2.jpg' width='30px' height='30px' />
			<img src='./img/test3.jpg' width='30px' height='30px' />
			<img src='./img/test4.jpg' width='30px' height='30px' />
			<img src='./img/test5.jpg' width='30px' height='30px' />
			<img src='./img/test6.jpg' width='30px' height='30px' />
			<img src='./img/test7.jpg' width='30px' height='30px' />
			<img src='./img/test8.jpg' width='30px' height='30px' />
			<img src='./img/test9.jpg' width='30px' height='30px' />
		</div>
	</body>
</html>